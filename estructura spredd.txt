ESTRUCTURA COMPLETA - GOOGLE SHEETS - MAZUHI SUSHI
===============================================

Fecha: 27 de noviembre 2025
Proyecto: Mazuhi Sushi Website
Versi√≥n: 1.0.0

===============================================
üîê CREDENCIALES REQUERIDAS
===============================================

GOOGLE_SERVICE_ACCOUNT_EMAIL=mazuhisushi@rich-surge-477017-s3.iam.gserviceaccount.com
GOOGLE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nMIIEvAIBADANBgkqhkiG9w0BAQEFAASCBKYwggSiAgEAAoIBAQDIh9gbqjzxdm4s\nSX0sex1sDYTvdT6qfuba+hGBfS2JEiTLoJNzfZggm2ZM5/xdzSKjfxNB851g5y9k\na6UOZd/y0+GsMgeEvlWRe6YhaDjLNZVfOla3860IvrAPivtfuRup2JtPe12JZlu8\nDINrmKot02L03950j5RJek6nmA8vcN5TNWOYVindJMPdFiQ4oRq5I1uJ5zfTKCDp\nb++1p8tvFjpLe0V1IROZjQNBpscmhteEDs2Z5T9uBqiRYmxema/Sp6X/zPcaSJvr\ni36CM+c2nzPk2A65zNMZoOxCo7oWzCEP0eAlRLk9Wib/ZCakRNx2U7pFJjJ3MuRW\nQ9XvFVxBAgMBAAECggEASwf1FujcM7bN41k98kpAiIEId/aFE5M2+sEtkqdNRefZ\nh61V7pUUOkMbBHSay1gpeUZfZMJr5OmrpGXYlOoOYNPhsSXpBUSYTL6YuxA9i99J\nPB/eeaa93DNJOg+VHcxrquHmvtcYeQQpF9QQyk4NgucAtEIdgLyGTfXq/y9YozVs\no1gSsuO8SLkAct7yqYbGA7o0Sz7dnKma8nh8NqkvKNKG/gYyj5Wfu9ZFIMiqkfXf\n8o7xbgZyXbUT4Gy5ns3hM3WSfkiXXJ1yTFk0vZJSp728RIWuFzSTZfL2VdQpMzbr\n6dSNe5OrSqMp/N+5JUB96SzQv6LqcP9zkI1OxzSJ3wKBgQDzjMdfYZZS1alF4vtb\nnOHgAETYBX2pkel5ZKF8JW0Js/6jBI7XHFBmaQTYQJsSIRvJV+CCYVYPf0CFZqXr\n1olS4kT27N86TMqnDqCDF5tjAX4ZL3HIRgSfk+wDPO4fpkkLszHSavzaOMsgUIvL\nKqxRNIuydxOgQi1f7ZeQAmqSawKBgQDSyBe7HVmYhXDnglsTr8VveCUvlOUneCaU\nOaahzMFj+dljH9hoFdd+4QMDgST6bHsLftbYRg3YIIPb+6bVcYY711u/QyuQ2VKE\nbviNjNEbuvq3jxdVVd7GuotHS8llmYNehCaVRDcbLzte23fLRSEO/XSjVSl9rZjr\n7MOaSdwvAwKBgGhfrpmrwrZhJpfyvHH4e7x5oQdK4x2mkH4bqDECAQalgrzuGSEK\n21HoM9FRbqOIWNYiuO5nNHCTwlzpLrYxTMyed5uyy7+6ZSbO1+8WUNtPKnE0qfiA\nOT8CL6T7mbkqlCdVdkaM3yvOJw8ENcSt1wc+E5g5+8k0UynHMqrevjldAoGAd+Qi\nQ2cdWDjGkJg/78Gx3oaLODZL5Zhc8UCdfDi344Lw2IX7lLCfw2Z/TVX+z4Y2ssIx\nuBCYvU85UT4hlhSdkpobcH3nYNuMKRHpxLHNGyXOh+wXDI3sSkM/B42e/3BDHdaz\nD4IeihLihUD2MaOfeyRFXMYK9JZyffdNBwxt9jsCgYBb1qNqDw8IcSisKtYIEvDT\nWvPfQ0VOLPqtgQhJP+al4v2X0a053EFVGvgLcbV25EuxG5s6y+iFEzvrH2ksg48f\nGR8P34Qf1hSp0eKsdUZ8zlNGcEPKXUmKrkXtH8IlfeEgZcpPgOUVWpP8Y7UFFaoi\nVsQvWBjaL/5pcjd/Xtv4jA==\n-----END PRIVATE KEY-----"
GOOGLE_SHEET_ID=1zQ8GWmW72NrhspyhF93ZKBnD1TSvnm69O2Gv2EECCUY

===============================================
üìä ESTRUCTURA DE HOJAS EN GOOGLE SHEETS
===============================================

SHEET ID: 1zQ8GWmW72NrhspyhF93ZKBnD1TSvnm69O2Gv2EECCUY

===============================================
üçΩÔ∏è HOJAS DEL MEN√ö (9 CATEGOR√çAS)
===============================================

COLUMNAS EST√ÅNDAR PARA TODAS LAS HOJAS DE MEN√ö:
--------------------------------------------------
| nombre        | Texto     | Nombre del platillo          | "California Roll"
| descripcion   | Texto     | Descripci√≥n detallada        | "Roll con aguacate, pepino..."
| precio        | N√∫mero    | Precio en MXN                | 85.00
| imagen_url    | URL       | Link de imagen               | "https://..."
| nuevo         | Booleano  | ¬øEs nuevo?                   | TRUE/SI
| vegetariano   | Booleano  | ¬øEs vegetariano?             | TRUE/SI
| picante       | Booleano  | ¬øEs picante?                 | TRUE/SI
| favorito      | Booleano  | ¬øEs favorito?                | TRUE/SI
| destacado     | Booleano  | ¬øAparece destacado?          | TRUE/SI
| promomiercoles| Booleano  | ¬øPromo mi√©rcoles?            | TRUE/SI

HOJAS REQUERIDAS:
------------------
1. Entradas
2. Arroces
3. Rollos_Naturales
4. Rollos_Empanizados
5. Rollos_Especiales
6. Rollos_Horneados
7. Bebidas
8. Postres
9. Extras

===============================================
üè™ HOJA: Sucursales
===============================================

COLUMNAS REQUERIDAS:
---------------------
| nombre         | Texto     | Nombre de la sucursal
| direccion      | Texto     | Direcci√≥n completa
| telefono       | Texto     | N√∫mero de tel√©fono
| horario        | Texto     | Horarios de atenci√≥n
| ciudad         | Texto     | Ciudad
| estado         | Texto     | Estado
| codigo_postal  | Texto     | C√≥digo postal
| imagen_url     | URL       | Imagen de la sucursal
| activa         | Booleano  | ¬øEst√° activa? (TRUE/SI)

===============================================
üéÅ HOJA: Promociones
===============================================

COLUMNAS REQUERIDAS:
---------------------
| nombre         | Texto     | Nombre de la promoci√≥n
| descripcion    | Texto     | Descripci√≥n detallada
| imagen_url     | URL       | Imagen de la promoci√≥n
| activa         | Booleano  | ¬øEst√° activa?
| sucursal       | Booleano  | ¬øAplica en sucursal?
| domicilio      | Booleano  | ¬øAplica en domicilio?

===============================================
üì¶ HOJA: Pedidos (PARA GUARDAR √ìRDENES)
===============================================

COLUMNAS REQUERIDAS:
---------------------
| N√∫mero de Orden    | Texto     | ID √∫nico del pedido
| Fecha             | Fecha     | Fecha y hora del pedido
| Nombre del Cliente| Texto     | Nombre completo
| Tel√©fono          | Texto     | N√∫mero de tel√©fono
| Tipo de Entrega   | Texto     | "Recojo en tienda" o "Delivery"
| Direcci√≥n         | Texto     | Direcci√≥n de entrega
| M√©todo de Pago    | Texto     | "Efectivo" o "Tarjeta"
| Monto de Pago     | Texto     | Cantidad pagada
| Pago Exacto       | Texto     | "S√≠" o "No"
| Productos         | JSON      | Detalle completo en JSON
| Subtotal          | Texto     | Suma sin env√≠o
| Env√≠o             | Texto     | Costo de env√≠o ($30 o $0)
| Total             | Texto     | Total final
| Notas             | Texto     | Notas adicionales
| Tiempo Estimado   | Texto     | Hora estimada de entrega
| Estado            | Texto     | Estado del pedido

===============================================
üöÄ APIs QUE USAN LAS CREDENCIALES
===============================================

1. /api/menu - GET
   - Funci√≥n: Obtiene todo el men√∫ completo
   - Cache: 10 minutos en memoria
   - Retorna: Array de categor√≠as con items
   - Endpoint test: POST para probar conexi√≥n

2. /api/platillos-destacados - GET
   - Funci√≥n: Obtiene platillos marcados como 'destacado' o 'favorito'
   - Cache: 10 minutos
   - Usa: Recorre todas las categor√≠as del men√∫

3. /api/promociones - GET
   - Par√°metros: ?tipo=sucursal o ?tipo=domicilio
   - Cache: 10 minutos
   - Filtra: Por tipo de promoci√≥n

4. /api/sucursales - GET
   - Par√°metros: ?ciudad=nombre_ciudad
   - Cache: 5 minutos
   - Filtra: Solo sucursales activas

5. /api/telegram - POST
   - Funci√≥n: Env√≠a pedido a Telegram Y guarda en Google Sheets
   - Guarda en: Hoja "Pedidos"
   - Campos: Toda la informaci√≥n del pedido

===============================================
üí∞ SISTEMA DE PRECIOS
===============================================

ESTRUCTURA DE PRECIOS:
-----------------------
- Almacenamiento: Columna 'precio' en cada hoja de men√∫
- Formato: N√∫mero decimal (ej: 85.50)
- Moneda: Pesos Mexicanos (MXN)
- C√°lculos autom√°ticos:
  - Subtotal = precio √ó cantidad
  - Env√≠o = $30.00 (delivery) / $0.00 (pickup)
  - Total = subtotal + env√≠o

ACTUALIZACI√ìN DE PRECIOS:
-------------------------
- M√©todo: Editar directamente en Google Sheets
- Tiempo de actualizaci√≥n: Inmediato (sin cache en men√∫ principal)
- APIs afectadas: /api/menu, /api/platillos-destacados

===============================================
üîÑ SISTEMA DE CACHE
===============================================

| API                    | Duraci√≥n Cache | Raz√≥n |
|------------------------|----------------|-------|
| /api/menu             | 10 minutos    | Men√∫ cambia frecuentemente |
| /api/platillos-destacados | 10 minutos    | Depende del men√∫ |
| /api/promociones      | 10 minutos    | Promociones cambian |
| /api/sucursales       | 5 minutos     | Sucursales m√°s estables |

NOTA: El cache se resetea autom√°ticamente al reiniciar el servidor.

===============================================
üìù PROCESO DE ACTUALIZACI√ìN
===============================================

PARA ACTUALIZAR MEN√ö/PRECIOS:
-----------------------------
1. Editar las hojas en Google Sheets
2. Guardar cambios
3. Esperar hasta 10 minutos (o reiniciar servidor)
4. Verificar en /api/menu que los cambios aparezcan

PARA AGREGAR NUEVA CATEGOR√çA:
-----------------------------
1. Crear nueva hoja en Google Sheets
2. Agregar columnas requeridas
3. Actualizar c√≥digo en googleSheets.ts (array categoryNames)
4. Probar la nueva API

===============================================
‚ö†Ô∏è PUNTOS CR√çTICOS
===============================================

PERMISOS REQUERIDOS:
---------------------
- ‚úÖ Lectura de todas las hojas
- ‚úÖ Escritura en hoja "Pedidos"
- ‚úÖ Acceso al spreadsheet completo

VALIDACIONES:
-------------
- ‚úÖ Verificaci√≥n de variables de entorno
- ‚úÖ Formato de private key (con \n)
- ‚úÖ Conexi√≥n exitosa a Google Sheets
- ‚úÖ Existencia de hojas requeridas

MANEJO DE ERRORES:
------------------
- üîÑ Reintentos autom√°ticos (3 intentos)
- ‚è±Ô∏è Backoff exponencial para rate limits
- üìù Logs detallados en consola
- üö® Mensajes de error descriptivos

===============================================
üéØ RESUMEN EJECUTIVO
===============================================

TOTAL DE FUNCIONALIDADES USANDO CREDENCIALES:
- üçΩÔ∏è 9 categor√≠as de men√∫ con precios din√°micos
- üè™ Sucursales con informaci√≥n completa
- üéÅ Promociones filtradas por tipo
- ‚≠ê Platillos destacados autom√°ticos
- üì¶ Guardado de pedidos en spreadsheet
- ü§ñ Env√≠o a Telegram + backup en Sheets

SISTEMA COMPLETAMENTE FUNCIONAL para gesti√≥n de restaurante con actualizaci√≥n en tiempo real desde Google Sheets. Los precios y men√∫ se actualizan autom√°ticamente sin necesidad de tocar c√≥digo.

===============================================
üìû CONTACTO Y SOPORTE
===============================================

Proyecto: Mazuhi Sushi Website
Desarrollador: GitHub Copilot
Fecha de creaci√≥n: 27 de noviembre 2025
Versi√≥n: 1.0.0

Para soporte t√©cnico o modificaciones contactar al equipo de desarrollo.